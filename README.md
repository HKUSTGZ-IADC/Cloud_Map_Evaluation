# Cloud_Map_Evaluation
Point cloud map evaluation library  for the FusionPortable dataset.  Metrics include RMSE, Accuracy(mean error), Precision(standard deviation), completeness(overlap ratio), chamfer distance(MD) and F1-score at all levels of 1cm/2cm/5cm/10cm/20cm.

## Dependencies

- *[Open3d ( >= 0.11)](https://github.com/isl-org/Open3D)* 

- Eigen3

## Usage

1. install open3d

```bash
git clone https://github.com/isl-org/Open3D.git
cd Open3D && mkdir build && cd build   
cmake ..
make install
```

2. install cloud_map_eval

```bash
git clone https://github.com/JokerJohn/Cloud_Map_Evaluation.git
cd Cloud_Map_Evaluation/cloud_map_eval && mkdir build
cmake ..
./cloud_map_eval
```

3. set some params

```c++
double icp_max_distance = 0.2;             // max correspondence pairs distance for  knn search in icp
int method = 2;                            // 0:point-to-point icp 1:point-to-plane icp 
Eigen::Matrix4d initial_matrix = Eigen::Matrix4d::Identity();   // initial pose for your map

sequence_name = "garden_day";
est_path = "/home/xchu/data/ramlab_dataset/result/garden_day/";
gt_path = "/home/xchu/data/ramlab_dataset/gt/map/garden_day_gt.pcd";
results_path = "/home/xchu/data/ramlab_dataset/result/";
```

4. get the final results

we have a point cloud map generated by a pose-slam system, and we have a ground truth point cloud map. Then we caculate related metrics.

![image-20221230172901321](README/image-20221230172901321.png)

We can also get a rendered distance-error map in this process, the color R->G->B represent for the distance error at a level of 0-10cm.

![image-20221230172500558](README/image-20221230172500558.png)

## Publications

We kindly recommond to cite our paper if you find this library useful:

```latex
@article{Jiao2022Aug,
	author = {Jiao, Jianhao and Wei, Hexiang and Hu, Tianshuai and Hu, Xiangcheng and Zhu, Yilong and He, Zhijian and Wu, Jin and Yu, Jingwen and Xie, Xupeng and Huang, Huaiyang and Geng, Ruoyu and Wang, Lujia and Liu, Ming},
	title = {{FusionPortable: A Multi-Sensor Campus-Scene Dataset for Evaluation of Localization and Mapping Accuracy on Diverse Platforms}},
	journaltitle = {ArXiv e-prints},
	shortjournal = {arXiv},
	year = {2022},
	month = aug,
	eprint = {2208.11865},
	doi = {10.48550/arXiv.2208.11865}
}
```